import{a as v}from"./chunk-SR25SAAB.js";import{W as E,k as g}from"./chunk-PVUOKLCY.js";import{Ia as y,Z as D,ba as u,db as T,fa as d,g as m,ga as w,k as S,ra as C,v as I}from"./chunk-3OE6TCCL.js";function ee(o){o||(o=w(C));let r=new m(a=>o.onDestroy(a.next.bind(a)));return a=>a.pipe(D(r))}var oe=(()=>{let r=class r{constructor(){this.isDevelopment=!v.production}info(e,...t){this.isDevelopment&&console.log(`\u2139\uFE0F ${this.formatMessage(e)}`,...t)}warn(e,...t){console.warn(`\u26A0\uFE0F ${this.formatMessage(e)}`,...t)}error(e,...t){console.error(`\u274C ${this.formatMessage(e)}`,...t)}debug(e,...t){this.isDevelopment&&console.debug(`\u{1F50D} ${this.formatMessage(e)}`,...t)}formatMessage(e){return`[${new Date().toISOString()}] ${e}`}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var f=function(o){return o[o.State=0]="State",o[o.Transition=1]="Transition",o[o.Sequence=2]="Sequence",o[o.Group=3]="Group",o[o.Animate=4]="Animate",o[o.Keyframes=5]="Keyframes",o[o.Style=6]="Style",o[o.Trigger=7]="Trigger",o[o.Reference=8]="Reference",o[o.AnimateChild=9]="AnimateChild",o[o.AnimateRef=10]="AnimateRef",o[o.Query=11]="Query",o[o.Stagger=12]="Stagger",o}(f||{}),ie="*";function ae(o,r){return{type:f.Trigger,name:o,definitions:r,options:{}}}function le(o,r=null){return{type:f.Animate,styles:r,timings:o}}function ce(o,r=null){return{type:f.Sequence,steps:o,options:r}}function ue(o){return{type:f.Style,styles:o,offset:null}}function de(o,r,a){return{type:f.State,name:o,styles:r,options:a}}function he(o,r,a=null){return{type:f.Transition,expr:o,animation:r,options:a}}var R=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(r=0,a=0){this.totalTime=r+a}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(r=>r()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(r){this._position=this.totalTime?r*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(r){let a=r=="start"?this._onStartFns:this._onDoneFns;a.forEach(e=>e()),a.length=0}},_=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(r){this.players=r;let a=0,e=0,t=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(n=>{n.onDone(()=>{++a==s&&this._onFinish()}),n.onDestroy(()=>{++e==s&&this._onDestroy()}),n.onStart(()=>{++t==s&&this._onStart()})}),this.totalTime=this.players.reduce((n,i)=>Math.max(n,i.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this.players.forEach(r=>r.init())}onStart(r){this._onStartFns.push(r)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(r=>r()),this._onStartFns=[])}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(r=>r.play())}pause(){this.players.forEach(r=>r.pause())}restart(){this.players.forEach(r=>r.restart())}finish(){this._onFinish(),this.players.forEach(r=>r.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(r=>r.destroy()),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this.players.forEach(r=>r.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(r){let a=r*this.totalTime;this.players.forEach(e=>{let t=e.totalTime?Math.min(1,a/e.totalTime):1;e.setPosition(t)})}getPosition(){let r=this.players.reduce((a,e)=>a===null||e.totalTime>a.totalTime?e:a,null);return r!=null?r.getPosition():0}beforeDestroy(){this.players.forEach(r=>{r.beforeDestroy&&r.beforeDestroy()})}triggerCallback(r){let a=r=="start"?this._onStartFns:this._onDoneFns;a.forEach(e=>e()),a.length=0}},ge="!";var M=[["00:00","00:30","01:00","01:30","02:00","02:30","03:00"],["03:00","03:30","04:00","04:30","05:00","05:30","06:00"],["06:00","06:30","07:00","07:30","08:00","08:30","09:00"],["09:00","09:30","10:00","10:30","11:00","11:30","12:00"],["12:00","12:30","13:00","13:30","14:00","14:30","15:00"],["15:00","15:30","16:00","16:30","17:00","17:30","18:00"],["18:00","18:30","19:00","19:30","20:00","20:30","21:00"],["21:00","21:30","22:00","22:30","23:00","23:30","00:00"]],c={VIRTUAL_SCROLL:{ITEM_SIZE:150,MAX_HEIGHT:700},TIME_INDICATOR:{UPDATE_INTERVAL:6e4,SCREEN_WIDTH_REM:18.375,COLUMN_WIDTH:180},VIEWPORT:{SETUP_DELAY:200,RETRY_DELAY:300,MAX_RETRIES:3},LOADING:{TIMEOUT:1e4,DEBOUNCE_TIME:100},PROGRAM_DISPLAY:{MIN_WIDTH:90,TIME_SLOT_DURATION:30,HOUR_WIDTH_PX:240,PIXELS_PER_MINUTE:4,LOGO_COLUMN_WIDTH:160},SCROLL:{SYNC_THRESHOLD:1,AUTO_DETECT_DELAY:100}},b={cine:"bg-purple-500/20 text-purple-300 border-purple-500/50",movie:"bg-purple-500/20 text-purple-300 border-purple-500/50",series:"bg-blue-500/20 text-blue-300 border-blue-500/50",noticias:"bg-red-500/20 text-red-300 border-red-500/50",news:"bg-red-500/20 text-red-300 border-red-500/50",deportes:"bg-green-500/20 text-green-300 border-green-500/50",sports:"bg-green-500/20 text-green-300 border-green-500/50",documental:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",documentary:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",entretenimiento:"bg-pink-500/20 text-pink-300 border-pink-500/50",entertainment:"bg-pink-500/20 text-pink-300 border-pink-500/50",infantil:"bg-orange-500/20 text-orange-300 border-orange-500/50",kids:"bg-orange-500/20 text-orange-300 border-orange-500/50",m\u00FAsica:"bg-indigo-500/20 text-indigo-300 border-indigo-500/50",music:"bg-indigo-500/20 text-indigo-300 border-indigo-500/50","estilo de vida":"bg-teal-500/20 text-teal-300 border-teal-500/50",lifestyle:"bg-teal-500/20 text-teal-300 border-teal-500/50",default:"bg-gray-500/20 text-gray-300 border-gray-500/50"},P={cine:"Pel\xEDcula",movie:"Pel\xEDcula",series:"Serie",noticias:"Noticias",news:"Noticias",deportes:"Deportes",sports:"Deportes",documental:"Documental",documentary:"Documental",entretenimiento:"Entretenimiento",entertainment:"Entretenimiento",infantil:"Infantil",kids:"Infantil",m\u00FAsica:"M\xFAsica",music:"M\xFAsica","estilo de vida":"Estilo de vida",lifestyle:"Estilo de vida"};var x=(()=>{let r=class r{getCurrentTimeSlot(){let e=new Date().getHours();return Math.floor(e/3)}getTimeSlots(){return M}getCurrentTime(){return new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1})}parseTimeToMinutes(e){if(!e)return 0;try{if(e.includes(":")&&e.length===5){let[s,n]=e.split(":").map(Number);return s*60+(n||0)}let t=new Date(e);if(!isNaN(t.getTime()))return t.getHours()*60+t.getMinutes()}catch(t){console.warn("Error parsing time:",e,t)}return 0}calculateTimePosition(e,t){let s=this.parseTimeToMinutes(e),n=this.parseTimeToMinutes(t),i=s-n;i<0&&(i+=24*60);let l=c.PROGRAM_DISPLAY.HOUR_WIDTH_PX/60;return Math.max(0,i*l)/16}generateHoursForSlot(e){let t=this.getTimeSlots();return e>=0&&e<t.length?[...t[e]]:[...t[0]]}formatDisplayTime(e){if(!e)return"";try{if(e.includes(":")&&e.length===5)return e;let t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){console.warn("Error formatting time:",e,t)}return e.substring(0,5)}shouldShowCurrentTimeIndicator(e){return e===0}calculateDuration(e,t){if(!e||!t)return 30;try{let s=this.parseTimeToMinutes(e),i=this.parseTimeToMinutes(t)-s;return i<=0&&(i+=24*60),Math.max(1,i)}catch(s){return console.warn("Error calculating duration:",{startTime:e,endTime:t,error:s}),30}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var L=(()=>{let r=class r{constructor(e,t){this.platformId=e,this.timeManager=t,this.screenWidthInRem=c.TIME_INDICATOR.SCREEN_WIDTH_REM,this.columnWidth=c.TIME_INDICATOR.COLUMN_WIDTH,g(this.platformId)&&(this.updateScreenDimensions(),this.setupResizeListener())}calculateProgramWidth(e){if(!e||e<=0)return`${c.PROGRAM_DISPLAY.MIN_WIDTH}px`;let t=c.PROGRAM_DISPLAY.HOUR_WIDTH_PX/60,s=e*t;return`${Math.max(c.PROGRAM_DISPLAY.MIN_WIDTH,s)}px`}calculateLeftPosition(e,t){if(!e||!t)return"0px";let s=this.timeManager.parseTimeToMinutes(e),n=this.timeManager.parseTimeToMinutes(t),i=s-n;i<0&&(i+=24*60);let l=c.PROGRAM_DISPLAY.HOUR_WIDTH_PX/60;return`${Math.max(0,i*l)}px`}updateScreenDimensions(){if(g(this.platformId))try{let e=parseFloat(getComputedStyle(document.documentElement).fontSize);this.screenWidthInRem=window.innerWidth/e,this.columnWidth=Math.floor(window.innerWidth/7),console.log("\u{1F4D0} Dimensions updated:",{screenWidthInRem:this.screenWidthInRem,columnWidth:this.columnWidth})}catch(e){console.warn("Error updating screen dimensions:",e)}}getColumnWidth(){return this.columnWidth}getScreenWidthInRem(){return this.screenWidthInRem}calculateCurrentTimeIndicatorPosition(e,t){let s=this.timeManager.parseTimeToMinutes(e),n=this.timeManager.parseTimeToMinutes(t),i=s-n;i<0&&(i+=24*60);let l=c.PROGRAM_DISPLAY.HOUR_WIDTH_PX/60;return Math.max(0,i*l)/16}calculateOptimalViewportSize(e){let t=c.VIRTUAL_SCROLL.MAX_HEIGHT,s=c.VIRTUAL_SCROLL.ITEM_SIZE;return e<5?{height:Math.min(e*s,t),itemSize:s}:{height:t,itemSize:s}}areDimensionsValid(){return this.screenWidthInRem>0&&this.columnWidth>0}setupResizeListener(){if(!g(this.platformId))return;let e,t=()=>{clearTimeout(e),e=setTimeout(()=>{this.updateScreenDimensions()},250)};window.addEventListener("resize",t)}};r.\u0275fac=function(t){return new(t||r)(d(y),d("TimeManager"))},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var O=(()=>{let r=class r{getCategoryBadgeClasses(e){if(!e)return`border ${b.default}`;let t=this.extractMainCategory(e),s=this.normalizeCategory(t);return`border ${b[s]||b.default}`}getCategoryDisplayName(e){if(!e)return"General";let t=this.extractMainCategory(e),s=this.normalizeCategory(t);return P[s]||t||"General"}getDayButtonClasses(e,t){let s="px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 shadow-lg";return e===t?`${s} bg-gradient-to-r from-red-500 to-red-600 text-white shadow-red-500/50`:`${s} bg-gray-700 text-gray-300 hover:bg-gray-600`}getTimeSlotButtonClasses(e,t){let s="px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 shadow-lg";return e===t?`${s} bg-gradient-to-r from-red-500 to-red-600 text-white shadow-red-500/50`:`${s} bg-gray-700 text-gray-300 hover:bg-gray-600`}getProgramContainerClasses(e,t){let s="relative border-r border-gray-600/30 last:border-r-0 cursor-pointer transition-all duration-200 group overflow-hidden";return e?s+=" bg-red-600/30 border-red-500":s+=" hover:bg-red-600/20",t&&(s+=" ring-2 ring-red-500 ring-opacity-50"),s}getCurrentTimeIndicatorClasses(){return"absolute w-0.5 bg-gradient-to-b from-red-400 via-red-500 to-red-600 z-50 shadow-2xl shadow-red-500/50"}extractMainCategory(e){return e&&e.split(",")[0]?.trim()||""}normalizeCategory(e){if(!e)return"";let t=e.toLowerCase().trim();return{cine:"movie",pel\u00EDcula:"movie",pel\u00EDculas:"movie",series:"series",serie:"series",noticias:"news",informativo:"news",informaci\u00F3n:"news",deportes:"sports",deporte:"sports",documental:"documentary",documentales:"documentary",entretenimiento:"entertainment",variedades:"entertainment",infantil:"kids",ni\u00F1os:"kids",m\u00FAsica:"music",musical:"music","estilo de vida":"lifestyle",lifestyle:"lifestyle"}[t]||t}getTextColorForBackground(e){return"text-white"}getLoadingClasses(){return"absolute inset-0 z-30 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm"}getSkeletonClasses(){return"animate-pulse bg-gray-700 rounded"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var A=(()=>{let r=class r{constructor(){this.logoUrlCache=new Map,this.failedLogos=new Set,this.canalesData$=new S({})}getChannelLogoUrl(e){if(!e)return"";let t=e.id||e.name,s=e.name;if(this.logoUrlCache.has(t))return this.logoUrlCache.get(t);if(this.failedLogos.has(t))return"";if(e.icon&&this.isValidUrl(e.icon))return this.logoUrlCache.set(t,e.icon),e.icon;let n=this.canalesData$.value;if(n&&Object.keys(n).length>0){let l=this.findLogoInCanalesData(s,n);if(l)return this.logoUrlCache.set(t,l),l}let i=this.generateAlternativeLogoUrl(s);return i?(this.logoUrlCache.set(t,i),i):""}handleLogoError(e){let t=e.target,s=t.src;this.markLogoAsFailed(s),t.style.display="none";let i=t.closest(".relative")?.querySelector(".channel-name-fallback");i&&i.classList.remove("hidden"),console.debug("Logo failed to load:",s)}handleLogoLoad(e){let t=e.target,n=t.closest(".relative")?.querySelector(".channel-name-fallback");n&&n.classList.add("hidden"),console.debug("Logo loaded successfully:",t.src)}clearCache(){this.logoUrlCache.clear(),this.failedLogos.clear(),console.log("\u{1F5D1}\uFE0F Channel logo cache cleared")}updateCanalesData(e){this.canalesData$.next(e||{}),this.logoUrlCache.clear()}getCanalesData(){return this.canalesData$.asObservable()}preloadLogos(e){e.forEach(t=>{let s=this.getChannelLogoUrl(t);s&&!this.failedLogos.has(s)&&this.preloadImage(s)})}getCacheStats(){let e=this.logoUrlCache.size+this.failedLogos.size,t=e>0?this.logoUrlCache.size/e*100:0;return{cached:this.logoUrlCache.size,failed:this.failedLogos.size,hitRate:Math.round(t*100)/100}}findLogoInCanalesData(e,t){if(!e||!t)return"";let s=this.normalizeChannelName(e),n=t[s];return n&&(n.logo||n.icon)||""}normalizeChannelName(e){return e?.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"").replace(/\+/g,"").replace(/hd$/i,"").replace(/tv$/i,"")||""}generateAlternativeLogoUrl(e){return e?[`https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/${encodeURIComponent(e)}.png`,`https://graph.facebook.com/${encodeURIComponent(e)}/picture?type=large`][0]:""}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}markLogoAsFailed(e){this.failedLogos.add(e);for(let[t,s]of this.logoUrlCache.entries())if(s===e){this.logoUrlCache.delete(t);break}}preloadImage(e){let t=new Image;t.onload=()=>console.debug("Logo preloaded:",e),t.onerror=()=>this.markLogoAsFailed(e),t.src=e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var F=(()=>{let r=class r{constructor(e,t){this.rendererFactory=e,this.platformId=t,this.setupAttempted=new Set,this.setupInProgress=new Set,this.renderer=this.rendererFactory.createRenderer(null,null)}setupUniqueViewport(e,t){if(!g(this.platformId)){console.log("\u{1F6AB} VIEWPORT - Skipping setup on server side");return}if(this.setupInProgress.has(t)){console.log("\u{1F504} VIEWPORT - Setup already in progress for",t);return}this.setupAttempted.add(t),this.setupInProgress.add(t),console.log("\u{1F527} VIEWPORT - Starting setup for component:",t),this.attemptViewportSetup(e,t,0)}ensureViewportUniqueness(e=0){if(!g(this.platformId))return!1;let t=c.VIEWPORT.MAX_RETRIES;if(e>=t)return console.warn("\u{1F6D1} VIEWPORT - Max retries reached for uniqueness check"),!1;try{let s=document.querySelectorAll("[data-cdk-virtual-scroll-viewport]"),n=new Set,i=!1;return s.forEach(l=>{let h=l.getAttribute("id")||l.getAttribute("data-viewport-id");h&&(n.has(h)?(i=!0,console.warn("\u{1F6A8} VIEWPORT - Duplicate viewport ID found:",h)):n.add(h))}),i&&(console.log("\u{1F504} VIEWPORT - Fixing duplicate IDs..."),this.fixDuplicateViewportIds()),!i}catch(s){return console.error("\u274C VIEWPORT - Error checking uniqueness:",s),!1}}cleanupViewport(){this.setupAttempted.clear(),this.setupInProgress.clear(),console.log("\u{1F5D1}\uFE0F VIEWPORT - Cleanup completed")}isViewportReady(){if(!g(this.platformId))return!1;try{return document.querySelectorAll("cdk-virtual-scroll-viewport").length>0}catch(e){return console.error("\u274C VIEWPORT - Error checking if ready:",e),!1}}attemptViewportSetup(e,t,s){let n=c.VIEWPORT.MAX_RETRIES;if(s>=n){console.log("\u{1F6D1} VIEWPORT - Max retries reached for component:",t),this.setupInProgress.delete(t);return}setTimeout(()=>{this.performViewportSetup(e,t)?(console.log("\u2705 VIEWPORT - Setup successful for component:",t),this.setupInProgress.delete(t)):(console.log(`\u26A0\uFE0F VIEWPORT - Setup failed, retrying... (${s+1}/${n})`),this.attemptViewportSetup(e,t,s+1))},s*c.VIEWPORT.RETRY_DELAY)}performViewportSetup(e,t){try{let s=e?.nativeElement;if(!s)return console.warn("\u26A0\uFE0F VIEWPORT - Element not found for component:",t),!1;let n=this.generateUniqueViewportId(t);return this.setViewportAttributes(s,t,n),this.ensureViewportUniqueness(),console.log("\u2705 VIEWPORT - Attributes set successfully:",{componentId:t,viewportId:n,element:s.tagName}),!0}catch(s){return console.error("\u274C VIEWPORT - Setup error:",s),!1}}setViewportAttributes(e,t,s){this.renderer.setAttribute(e,"id",s),this.renderer.setAttribute(e,"data-viewport-id",s),this.renderer.setAttribute(e,"data-cdk-unique-instance",t),this.renderer.setAttribute(e,"data-component-instance",t),this.renderer.setAttribute(e,"cdk-virtual-scroll-unique",t),this.renderer.setAttribute(e,"data-cdk-viewport-instance",t),this.renderer.setAttribute(e,"data-angular-component-id",t),this.renderer.addClass(e,`viewport-${t}`),this.renderer.addClass(e,"unique-viewport-instance"),this.renderer.setAttribute(e,"aria-label",`Program list viewport ${t}`),this.renderer.setAttribute(e,"role","grid")}generateUniqueViewportId(e){let t=Date.now(),s=Math.random().toString(36).substring(2,8);return`viewport-${e}-${t}-${s}`}fixDuplicateViewportIds(){try{let e=document.querySelectorAll("cdk-virtual-scroll-viewport"),t=new Set;e.forEach((s,n)=>{let i=s.getAttribute("id");if(!i||t.has(i)){let h=`viewport-fixed-${Date.now()}-${n}-${Math.random().toString(36).substring(2,8)}`;this.renderer.setAttribute(s,"id",h),this.renderer.setAttribute(s,"data-viewport-id",h),this.renderer.addClass(s,"viewport-id-fixed"),console.log("\u{1F527} VIEWPORT - Fixed duplicate ID:",{old:i,new:h})}let l=s.getAttribute("id");l&&t.add(l)})}catch(e){console.error("\u274C VIEWPORT - Error fixing duplicate IDs:",e)}}diagnoseViewportState(){if(!g(this.platformId)){console.log("\u{1F50D} VIEWPORT DIAGNOSIS - Running on server side");return}console.log("\u{1F50D} VIEWPORT DIAGNOSIS - Starting...");try{let e=document.querySelectorAll("cdk-virtual-scroll-viewport");console.table({"Total Viewports":e.length,"Setup Attempted":this.setupAttempted.size,"Setup In Progress":this.setupInProgress.size,"Is Ready":this.isViewportReady()}),e.forEach((t,s)=>{console.log(`Viewport ${s+1}:`,{id:t.getAttribute("id"),componentId:t.getAttribute("data-component-instance"),classes:t.className,uniqueInstance:t.getAttribute("data-cdk-unique-instance")})})}catch(e){console.error("\u274C VIEWPORT DIAGNOSIS - Error:",e)}}};r.\u0275fac=function(t){return new(t||r)(d(T),d(y))},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var xe=(()=>{let r=class r{constructor(e,t,s,n,i,l){this.timeManager=e,this.dimensionCalculator=t,this.styleManager=s,this.logoManager=n,this.viewportManager=i,this.homeDataService=l}getProgramListData(){return this.homeDataService.getProgramListData$()}getLoadingState(){return this.homeDataService.loading$}getErrorState(){return this.homeDataService.error$}refreshData(){return this.homeDataService.refreshData().pipe(I(e=>({success:e.success,data:!!e.success,error:e.success?void 0:e.error})))}getTimeSlots(){return this.timeManager.getTimeSlots()}getCurrentTimeSlot(){return this.timeManager.getCurrentTimeSlot()}generateHoursForSlot(e){return this.timeManager.generateHoursForSlot(e)}formatDisplayTime(e){return this.timeManager.formatDisplayTime(e)}calculateTimeIndicatorState(e,t){return new m(s=>{let n=this.timeManager.shouldShowCurrentTimeIndicator(e),i=this.timeManager.getCurrentTime(),l=this.dimensionCalculator.calculateCurrentTimeIndicatorPosition(i,t);s.next({visible:n,leftPosition:l,currentTime:i})})}calculateProgramWidth(e){return this.dimensionCalculator.calculateProgramWidth(e)}calculateLeftPosition(e,t){return this.dimensionCalculator.calculateLeftPosition(e,t)}updateScreenDimensions(){this.dimensionCalculator.updateScreenDimensions()}getCategoryBadgeClasses(e){return this.styleManager.getCategoryBadgeClasses(e)}getCategoryDisplayName(e){return this.styleManager.getCategoryDisplayName(e)}getDayButtonClasses(e,t){return this.styleManager.getDayButtonClasses(e,t)}getTimeSlotButtonClasses(e,t){return this.styleManager.getTimeSlotButtonClasses(e,t)}getProgramContainerClasses(e,t){return this.styleManager.getProgramContainerClasses(e,t)}getChannelLogoUrl(e){return this.logoManager.getChannelLogoUrl(e)}handleLogoError(e){this.logoManager.handleLogoError(e)}handleLogoLoad(e){this.logoManager.handleLogoLoad(e)}updateChannelData(e){this.logoManager.updateCanalesData(e)}setupUniqueViewport(e,t){this.viewportManager.setupUniqueViewport(e,t)}isViewportReady(){return this.viewportManager.isViewportReady()}cleanupViewport(){this.viewportManager.cleanupViewport()}generateDaysInfo(){let e=[],t=new Date;for(let s=0;s<3;s++){let n=new Date(t);n.setDate(n.getDate()+s);let i=n.toLocaleDateString("es-ES",{weekday:"long"}),l=n.toLocaleDateString("es-ES",{day:"numeric"});e.push({diaSemana:i,diaNumero:l,index:s})}return e}loadProgramsForDay(e){return this.homeDataService.loadDataForDay(e).pipe(I(t=>({success:t.success,data:!!t.success,error:t.success?void 0:t.error})))}calculateProgramDuration(e,t){return this.timeManager.calculateDuration(e,t)}generateProgramAriaLabel(e){let t=this.formatDisplayTime(e.start),s=this.formatDisplayTime(e.stop),n=this.getCategoryDisplayName(e.category?.value||"");return`${e.title||"Programa"}, ${t} a ${s}, ${n}`}diagnoseState(){console.log("\u{1F50D} PROGRAM LIST FACADE - Diagnosing state...");let e=this.dimensionCalculator.areDimensionsValid();console.log("\u{1F4D0} Dimensions valid:",e),this.viewportManager.diagnoseViewportState();let t=this.logoManager.getCacheStats();console.log("\u{1F5BC}\uFE0F Logo cache stats:",t),this.homeDataService.debugState()}resetAllCaches(){this.logoManager.clearCache(),this.viewportManager.cleanupViewport(),console.log("\u{1F5D1}\uFE0F All caches reset")}};r.\u0275fac=function(t){return new(t||r)(d(x),d(L),d(O),d(A),d(F),d(E))},r.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{f as a,ie as b,ae as c,le as d,ce as e,ue as f,de as g,he as h,R as i,_ as j,ge as k,ee as l,oe as m,x as n,L as o,O as p,A as q,F as r,xe as s};
