import './polyfills.server.mjs';
import{M as z,R as D,S as E,V as B,X as R,h as k,ha as V,m as S}from"./chunk-MTFKIQB4.mjs";import{Cb as b,Fb as p,Gb as a,Hb as r,Ib as f,Lb as v,Pb as u,Qb as d,Wa as y,_a as o,ac as O,bc as I,cc as c,db as M,dc as T,ec as m,ha as g,ia as h,ja as x,ka as _,kb as P,pb as C,wa as w}from"./chunk-GKUCNG4B.mjs";function U(i,s){if(i&1&&(a(0,"div",26)(1,"time",27),c(2),r(),a(3,"span",28),c(4,"\u2014"),r(),a(5,"time",29),c(6),r()()),i&2){let t=d(2);o(),b("datetime",t.bannerData.start),o(),m(" ",t.getHora(t.bannerData.start)," "),o(3),b("datetime",t.bannerData.stop),o(),m(" ",t.getHora(t.bannerData.stop)," ")}}function j(i,s){if(i&1&&(a(0,"li",30),c(1),r()),i&2){let t=d(2);o(),m(" ",t.bannerData.desc.year," ")}}function L(i,s){if(i&1&&(a(0,"li",31),c(1),r()),i&2){let t=d(2);o(),m(" ",t.bannerData.desc.rate," ")}}function H(i,s){if(i&1&&(a(0,"li",32),c(1),r()),i&2){let t=d(2);o(),m(" ",t.time," ")}}function G(i,s){if(i&1&&(a(0,"li",33)(1,"span",34),c(2,"\u2B50"),r(),c(3),r()),i&2){let t=d(2);o(3),m(" ",t.bannerData.starRating," ")}}function N(i,s){if(i&1){let t=v();a(0,"article",2)(1,"div",3)(2,"img",4),u("error",function(n){g(t);let l=d();return h(l.onImageError(n))}),r(),f(3,"div",5),r(),a(4,"div",6)(5,"header",7)(6,"div",8)(7,"img",9),u("error",function(n){g(t);let l=d();return h(l.onImageError(n))}),r(),a(8,"span",10),c(9),r()(),C(10,U,7,4,"div",11),r(),a(11,"div",12)(12,"h2",13),c(13),r(),a(14,"ul",14),C(15,j,2,1,"li",15)(16,L,2,1,"li",16)(17,H,2,1,"li",17)(18,G,4,1,"li",18),r(),a(19,"p",19),c(20),r(),a(21,"div",20)(22,"button",21),u("click",function(){g(t);let n=d();return h(n.navigateTo())}),x(),a(23,"svg",22),f(24,"path",23),r(),_(),a(25,"span"),c(26,"M\xE1s Detalles"),r()(),a(27,"button",24),u("click",function(){g(t);let n=d();return h(n.addReminder())}),x(),a(28,"svg",22),f(29,"path",25),r(),_(),a(30,"span"),c(31,"Recordar"),r()()()()()()}if(i&2){let t=d();O("banner-compact",t.compact),o(2),p("src","https://wsrv.nl/?url="+t.encodeURIComponent(t.getProgramPosterUrl(t.bannerData))+"&w=1920&h=800&output=webp&q=85",y)("srcset",t.getBannerSrcset(t.getProgramPosterUrl(t.bannerData)))("alt","Imagen de "+((t.bannerData.title==null?null:t.bannerData.title.value)||"programa")),b("loading",t.compact?"lazy":"eager")("fetchpriority",t.compact?"low":"high"),o(5),I(t.compactLogo?"channel-logo-small":"channel-logo"),p("src",t.getChannelLogoUrl(t.bannerData.channel),y)("alt",t.bannerData.channel+" logo"),o(2),T(t.bannerData.channel),o(),p("ngIf",!t.hideTopTime),o(3),m(" ",t.bannerData.title==null?null:t.bannerData.title.value," "),o(2),p("ngIf",t.bannerData.desc==null?null:t.bannerData.desc.year),o(),p("ngIf",t.bannerData.desc==null?null:t.bannerData.desc.rate),o(),p("ngIf",t.time),o(),p("ngIf",t.bannerData.starRating),o(2),m(" ",t.bannerData.desc==null?null:t.bannerData.desc.details," "),o(2),b("aria-label","Ver m\xE1s detalles de "+((t.bannerData.title==null?null:t.bannerData.title.value)||"programa"))}}function A(i,s){i&1&&(a(0,"div",35),x(),a(1,"svg",36),f(2,"path",37),r(),_(),a(3,"p",38),c(4,"No hay datos disponibles para mostrar"),r()())}var q=(()=>{let s=class s{constructor(e,n){this.router=e,this.guiatvSvc=n,this.data={},this.compact=!1,this.compactLogo=!1,this.hideTopTime=!1,this.bannerData=null,this.logo="",this.time=""}ngOnInit(){this.processBannerData()}ngOnChanges(e){e.data&&e.data.currentValue&&this.processBannerData()}processBannerData(){if(!this.data||Object.keys(this.data).length===0){this.bannerData=null;return}this.isMovieData(this.data)?this.bannerData=this.convertMovieToBannerData(this.data):this.isProgramData(this.data)?this.bannerData=this.convertProgramToBannerData(this.data):this.bannerData=this.convertGenericToBannerData(this.data),this.bannerData?.start&&this.bannerData?.stop&&(this.time=this.calculateDuration(this.bannerData.start,this.bannerData.stop))}isMovieData(e){return!!(e.title&&(e.poster||e.description||e.rating||e.releaseDate))}isProgramData(e){return!!(e.title&&e.channel&&e.start&&e.stop)}convertMovieToBannerData(e){let n=typeof e.title=="string"?{value:e.title}:e.title||{value:"T\xEDtulo desconocido"},l=typeof e.desc=="string"?{details:e.desc}:e.desc;return{title:n,channel:e.channelName||e.channel||"Canal desconocido",poster:e.poster||e.icon,icon:e.icon,start:this.normalizeTimeString(e.startTime||e.start),stop:this.normalizeTimeString(e.endTime||e.stop),desc:{details:e.description||l?.details||e.overview,year:e.year||e.releaseDate||l?.year,rate:e.rating?.toString()||l?.rate||"TP"},category:typeof e.category=="string"?{value:e.category}:e.category,starRating:e.starRating||e.vote_average||e.rating,id:e.id}}convertProgramToBannerData(e){return{title:typeof e.title=="string"?{value:e.title}:e.title||{value:"Programa desconocido"},channel:e.channel||"Canal desconocido",poster:e.poster||e.icon,icon:e.icon,start:this.normalizeTimeString(e.start),stop:this.normalizeTimeString(e.stop),desc:typeof e.desc=="string"?{details:e.desc}:e.desc,category:typeof e.category=="string"?{value:e.category}:e.category,starRating:e.starRating,id:e.id}}convertGenericToBannerData(e){return this.convertProgramToBannerData(e)}formatTime(e){try{return B(e)}catch{return E(e)}}calculateDuration(e,n){return D(e,n)}normalizeTimeString(e){return e?e instanceof Date?e.toISOString():e:new Date().toISOString()}getChannelLogoUrl(e){return`https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/${e}.png`}getProgramPosterUrl(e){return e?.poster||e?.icon||this.getFallbackImageUrl()}encodeURIComponent(e){try{return globalThis.encodeURIComponent(String(e||""))}catch{return String(e||"")}}getBannerSrcset(e){return e?[768,1024,1280,1600,1920].map(l=>`https://wsrv.nl/?url=${this.encodeURIComponent(e)}&w=${l}&h=${Math.round(l*.416)}&output=webp ${l}w`).join(", "):""}addReminder(){try{console.log("addReminder clicked for",this.bannerData?.id||this.bannerData?.title?.value)}catch{}}getFallbackImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiMzNzQxNTEiLz48L3N2Zz4="}handleImageError(e){let n=e.target;n.src=this.getFallbackImageUrl()}getHora(e){return this.formatTime(e)}onImageError(e){this.handleImageError(e)}navigateTo(){if(!this.bannerData)return;this.guiatvSvc.setDetallesPrograma(this.bannerData);let e=this.bannerData.title?.value||"unknown",n=R(e);this.isMovieData(this.data)?this.router.navigate(["/peliculas",n],{state:{bannerData:this.bannerData}}):this.router.navigate(["/programas",n],{state:{bannerData:this.bannerData}})}};s.\u0275fac=function(n){return new(n||s)(M(z),M(V))},s.\u0275cmp=P({type:s,selectors:[["app-banner"]],inputs:{data:"data",compact:"compact",compactLogo:"compactLogo",hideTopTime:"hideTopTime"},features:[w],decls:2,vars:2,consts:[["class","banner-hero","itemscope","","itemtype","https://schema.org/VideoObject",3,"banner-compact",4,"ngIf"],["class","banner-empty","role","status","aria-label","No hay datos disponibles",4,"ngIf"],["itemscope","","itemtype","https://schema.org/VideoObject",1,"banner-hero"],[1,"banner-background"],["sizes","100vw","width","1920","height","800",1,"banner-bg-image",3,"error","src","srcset","alt"],[1,"banner-overlay"],[1,"banner-content"],[1,"banner-header"],[1,"channel-info"],["loading","lazy","width","120","height","60",3,"error","src","alt"],["itemprop","provider",1,"channel-name"],["class","time-badge",4,"ngIf"],[1,"banner-info"],["itemprop","name",1,"program-title"],[1,"program-metadata"],["itemprop","datePublished",4,"ngIf"],["itemprop","contentRating",4,"ngIf"],["itemprop","duration",4,"ngIf"],["class","rating","itemprop","aggregateRating",4,"ngIf"],["itemprop","description",1,"program-description"],[1,"banner-actions"],["type","button",1,"btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"btn-icon"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule","evenodd"],["type","button","aria-label","Recordar este programa",1,"btn-secondary",3,"click"],["d","M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"],[1,"time-badge"],["itemprop","startDate"],[1,"time-separator"],["itemprop","endDate"],["itemprop","datePublished"],["itemprop","contentRating"],["itemprop","duration"],["itemprop","aggregateRating",1,"rating"],["aria-label","Valoraci\xF3n"],["role","status","aria-label","No hay datos disponibles",1,"banner-empty"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"empty-text"]],template:function(n,l){n&1&&C(0,N,32,20,"article",0)(1,A,5,0,"div",1),n&2&&(p("ngIf",l.bannerData),o(),p("ngIf",!l.bannerData))},dependencies:[S,k],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%}.banner-hero[_ngcontent-%COMP%]{position:relative;width:100%;min-height:320px;height:clamp(320px,40vw,500px);border-radius:12px;overflow:hidden;margin:1rem 0;animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@media (min-width: 1024px){.banner-hero[_ngcontent-%COMP%]{min-height:400px;height:clamp(400px,45vw,600px)}}.banner-hero.banner-compact[_ngcontent-%COMP%]{min-height:240px;height:280px}.banner-background[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.banner-bg-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.banner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(180deg,#0000004d,#0006 40%,#000000b3,#000000f2)}.banner-content[_ngcontent-%COMP%]{position:relative;z-index:10;display:flex;flex-direction:column;justify-content:space-between;height:100%;padding:1.5rem}@media (min-width: 768px){.banner-content[_ngcontent-%COMP%]{padding:2rem}}@media (min-width: 1024px){.banner-content[_ngcontent-%COMP%]{padding:2.5rem}}.banner-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap}.channel-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.channel-logo[_ngcontent-%COMP%]{width:120px;height:60px;padding:.5rem;background:#1f293799;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:8px;object-fit:contain}@media (min-width: 1024px){.channel-logo[_ngcontent-%COMP%]{width:140px;height:70px}}.channel-logo-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;object-fit:contain;background:#0000004d;padding:4px}.channel-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#ffffffe6;text-shadow:0 2px 4px rgba(0,0,0,.5)}@media (min-width: 1024px){.channel-name[_ngcontent-%COMP%]{font-size:1rem}}.time-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:#000000bf;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;font-size:.875rem;font-weight:700;color:#fff;box-shadow:0 4px 12px #0000004d}@media (min-width: 1024px){.time-badge[_ngcontent-%COMP%]{font-size:1rem;padding:.75rem 1.25rem}}.time-badge[_ngcontent-%COMP%]   .time-separator[_ngcontent-%COMP%]{color:#ffffff80}.banner-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;max-width:900px}@media (min-width: 1024px){.banner-info[_ngcontent-%COMP%]{gap:1rem}}.program-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin:0;line-height:1.2;text-shadow:0 2px 8px rgba(0,0,0,.8);text-transform:uppercase;letter-spacing:-.01em}@media (min-width: 768px){.program-title[_ngcontent-%COMP%]{font-size:2rem}}@media (min-width: 1024px){.program-title[_ngcontent-%COMP%]{font-size:2.5rem}}.program-metadata[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;margin:0;padding:0;list-style:none}.program-metadata[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#ffffffe6;text-shadow:0 2px 4px rgba(0,0,0,.5)}@media (min-width: 1024px){.program-metadata[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1rem}}.program-metadata[_ngcontent-%COMP%]   li.rating[_ngcontent-%COMP%]{color:#fbbf24}.program-metadata[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin-left:1rem;color:#fff6}.program-description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.6;color:#e5e7ebf2;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.5);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;max-width:70ch}@media (min-width: 768px){.program-description[_ngcontent-%COMP%]{font-size:.9375rem;-webkit-line-clamp:2}}@media (min-width: 1024px){.program-description[_ngcontent-%COMP%]{font-size:1rem}}.banner-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;font-weight:700;border:none;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);min-height:44px;text-shadow:none}@media (min-width: 1024px){.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.875rem 1.75rem;font-size:.9375rem}}.btn-primary[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}@media (min-width: 1024px){.btn-primary[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:20px;height:20px}}.btn-primary[_ngcontent-%COMP%]:focus-visible, .btn-secondary[_ngcontent-%COMP%]:focus-visible{outline:2px solid #fff;outline-offset:2px}.btn-primary[_ngcontent-%COMP%]{background:#dc2626;color:#fff;box-shadow:0 4px 12px #dc26264d}.btn-primary[_ngcontent-%COMP%]:hover{background:#bb1e1e;transform:translateY(-2px);box-shadow:0 6px 16px #dc262666}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-secondary[_ngcontent-%COMP%]{background:#374151e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);color:#fff;border:1px solid rgba(255,255,255,.1)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#dc2626e6;border-color:#dc2626;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0)}.banner-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:320px;padding:3rem 1.5rem;background:linear-gradient(135deg,#1f29374d,#11182780);border-radius:12px;margin:1rem 0}.banner-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:64px;height:64px;color:#9ca3af80;margin-bottom:1rem}.banner-empty[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3afcc;margin:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (prefers-reduced-motion: reduce){.banner-hero[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{animation:none!important;transition:none!important}.btn-primary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:hover{transform:none!important}}.banner-bg-image[_ngcontent-%COMP%]{transform:translateZ(0);backface-visibility:hidden}@media print{.banner-actions[_ngcontent-%COMP%]{display:none}.banner-hero[_ngcontent-%COMP%]{page-break-inside:avoid}}']});let i=s;return i})();export{q as a};
