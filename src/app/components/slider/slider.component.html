<!-- Native Slider - Optimizado para datos reales -->
<section
  class="native-slider"
  [ngClass]="'slider--' + (variant || 'default')"
  [attr.aria-label]="
    'Carrusel de ' +
    (variant === 'peliculas'
      ? 'películas'
      : variant === 'series'
      ? 'series'
      : 'programas')
  "
>
  <!-- Scroll Container -->
  <div #scrollContainer class="slider-scroll-container" role="list">
    <article
      *ngFor="let program of programas; index as i; trackBy: trackByProgram"
      class="slider-item"
      role="listitem"
    >
      <a
        class="slider-item-inner"
        role="button"
        tabindex="0"
        (click)="manageData(program)"
        (keydown.enter)="manageData(program)"
        (keydown.space)="$event.preventDefault(); manageData(program)"
        [attr.aria-label]="
          'Ver ' + (program?.title?.value || program?.name || 'programa')
        "
      >
        <figure class="slide-media">
          <!-- Imagen principal del programa (icon es la imagen del programa) -->
          <img
            class="slide-image"
            [attr.data-src]="buildWsrvUrl(program?.icon, 800, 450)"
            [src]="
              isFirst(i)
                ? buildWsrvUrl(program?.icon, 800, 450)
                : posterPlaceholder
            "
            [srcset]="
              isFirst(i) ? buildSrcset(program?.icon, [400, 600, 800]) : ''
            "
            sizes="(max-width: 640px) 92vw, (max-width: 1024px) 32vw, 19vw"
            [attr.alt]="program?.title?.value || 'Programa'"
            [attr.loading]="isFirst(i) ? 'eager' : 'lazy'"
            [attr.decoding]="isFirst(i) ? 'sync' : 'async'"
            width="800"
            height="450"
            (error)="onLogoError($event, program)"
          />

          <!-- Overlay gradient -->
          <div class="slide-overlay"></div>

          <!-- Información del programa -->
          <figcaption class="slide-caption">
            <!-- Hora arriba izquierda -->
            <div class="time-badge">
              <time *ngIf="program?.start" [attr.datetime]="program.start">
                {{ horaInicio(i) }}
              </time>
            </div>

            <!-- Info abajo -->
            <div class="program-info">
              <!-- Canal -->
              <div class="channel-badge">
                {{ program?.channel || "Canal" }}
              </div>

              <!-- Título -->
              <h3 class="program-title">
                {{ program?.title?.value || "Título desconocido" }}
              </h3>

              <!-- Metadata -->
              <div class="program-meta">
                <span *ngIf="program?.desc?.year" class="meta-item">{{
                  program.desc.year
                }}</span>
                <span *ngIf="program?.starRating" class="meta-item rating"
                  >★ {{ program.starRating }}</span
                >
                <span
                  *ngIf="program?.desc?.rate"
                  class="meta-item age-rating"
                  >{{ program.desc.rate }}</span
                >
              </div>
            </div>
          </figcaption>
        </figure>
      </a>
    </article>
  </div>

  <!-- Controles de navegación -->
  <div
    class="slider-nav"
    role="group"
    aria-label="Controles"
    *ngIf="isBrowser && hasMultipleSlides()"
  >
    <button
      class="slider-nav-btn slider-nav-prev"
      type="button"
      aria-label="Anterior"
      [disabled]="!canScrollPrev()"
      (click)="prev()"
    >
      ‹
    </button>
    <button
      class="slider-nav-btn slider-nav-next"
      type="button"
      aria-label="Siguiente"
      [disabled]="!canScrollNext()"
      (click)="next()"
    >
      ›
    </button>
  </div>
</section>
