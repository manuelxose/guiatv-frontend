<!-- BANNER COMPONENT -->

<div
  *ngIf="bannerData"
  class="flex flex-col justify-between mt-4 bg-black/10 bg-blend-multiply rounded-3xl h-80 overflow-hidden bg-cover bg-center px-7 pt-4 pb-6 text-white relative"
  [style.backgroundImage]="'url(' + 'https://wsrv.nl/?url=' + getProgramPosterUrl(bannerData) + ')'"
  [style.backgroundSize]="'cover'"
  [style.backgroundPosition]="'center'"
>
  <!-- Fallback background color if image fails -->
  <div class="absolute inset-0 bg-gradient-to-r from-gray-800 to-gray-900 -z-10"></div>
  
  <!-- Top section -->
  <div class="flex items-center justify-between">
    <div class="flex items-center space-x-4">
      <img
        class="w-32 h-16 bg-gray-800/40 rounded-lg px-1.5 object-contain"
        [src]="getChannelLogoUrl(bannerData.channel)"
        [alt]="bannerData.channel"
        loading="lazy"
        (error)="onImageError($event)"
      />
      <span class="text-xs drop-shadow-lg">{{ bannerData.channel }}</span>
    </div>

    <span class="text-lg p-2.5 bg-gray-800/50 rounded-lg">
      {{ getHora(bannerData.start) + " - " + getHora(bannerData.stop) }}
    </span>
  </div>

  <!-- Bottom section -->
  <div class="bg-gradient-to-r from-black/30 to-transparent -mx-7 -mb-6 px-7 pb-6 pt-2">
    <h2 class="uppercase text-3xl font-semibold drop-shadow-lg mb-2">
      {{ bannerData.title?.value }}
    </h2>

    <ul class="flex space-x-6 text-sm mb-3">
      <li *ngIf="bannerData.desc?.year">{{ bannerData.desc.year }}</li>
      <li *ngIf="bannerData.desc?.rate">{{ bannerData.desc.rate }}</li>
      <li *ngIf="time">{{ time }}</li>
      <li *ngIf="bannerData.starRating">⭐ {{ bannerData.starRating }}</li>
    </ul>

    <p class="text-xs text-gray-200 mb-4 line-clamp-3">
      {{ bannerData.desc?.details }}
    </p>

    <div class="flex space-x-3 items-center">
      <button
        (click)="navigateTo()"
        class="px-5 py-2.5 bg-red-600 hover:bg-red-700 transition-colors rounded-lg text-xs cursor-pointer"
      >
        Más Detalles
      </button>
      <button
        class="px-4 py-2.5 bg-gray-800/80 hover:bg-red-600 transition-colors rounded-lg flex items-center space-x-1"
      >
        <span class="text-xs">Recordar</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
            clip-rule="evenodd"
          />
        </svg>
      </button>
    </div>
  </div>
</div>

<!-- Mensaje de error si no hay datos -->
<div *ngIf="!bannerData" class="flex flex-col items-center justify-center mt-4 bg-gray-800/20 rounded-3xl h-80 text-white">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4zM9 6h6v12H9V6z" />
  </svg>
  <p class="text-gray-400 text-sm">No hay datos disponibles para mostrar</p>
</div>
