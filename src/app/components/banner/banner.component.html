<!-- Banner Component - Optimizado SEO & Performance -->
<article
  *ngIf="bannerData"
  class="banner-hero"
  [class.banner-compact]="compact"
  itemscope
  itemtype="https://schema.org/VideoObject"
>
  <!-- Imagen de fondo optimizada -->
  <div class="banner-background">
    <img
      class="banner-bg-image"
      [src]="
        'https://wsrv.nl/?url=' +
        encodeURIComponent(getProgramPosterUrl(bannerData)) +
        '&w=1920&h=800&output=webp&q=85'
      "
      [srcset]="getBannerSrcset(getProgramPosterUrl(bannerData))"
      sizes="100vw"
      [alt]="'Imagen de ' + (bannerData.title?.value || 'programa')"
      [attr.loading]="compact ? 'lazy' : 'eager'"
      [attr.fetchpriority]="compact ? 'low' : 'high'"
      width="1920"
      height="800"
      (error)="onImageError($event)"
    />
    <!-- Gradient overlay -->
    <div class="banner-overlay"></div>
  </div>

  <!-- Contenido del banner -->
  <div class="banner-content">
    <!-- Top section: Canal y horario -->
    <header class="banner-header">
      <div class="channel-info">
        <!-- Logo del canal -->
        <img
          [class]="compactLogo ? 'channel-logo-small' : 'channel-logo'"
          [src]="getChannelLogoUrl(bannerData.channel)"
          [alt]="bannerData.channel + ' logo'"
          loading="lazy"
          width="120"
          height="60"
          (error)="onImageError($event)"
        />
        <span class="channel-name" itemprop="provider">{{
          bannerData.channel
        }}</span>
      </div>

      <!-- Horario -->
      <div *ngIf="!hideTopTime" class="time-badge">
        <time [attr.datetime]="bannerData.start" itemprop="startDate">
          {{ getHora(bannerData.start) }}
        </time>
        <span class="time-separator">—</span>
        <time [attr.datetime]="bannerData.stop" itemprop="endDate">
          {{ getHora(bannerData.stop) }}
        </time>
      </div>
    </header>

    <!-- Bottom section: Información del programa -->
    <div class="banner-info">
      <!-- Título -->
      <h2 class="program-title" itemprop="name">
        {{ bannerData.title?.value }}
      </h2>

      <!-- Metadata -->
      <ul class="program-metadata">
        <li *ngIf="bannerData.desc?.year" itemprop="datePublished">
          {{ bannerData.desc.year }}
        </li>
        <li *ngIf="bannerData.desc?.rate" itemprop="contentRating">
          {{ bannerData.desc.rate }}
        </li>
        <li *ngIf="time" itemprop="duration">
          {{ time }}
        </li>
        <li
          *ngIf="bannerData.starRating"
          class="rating"
          itemprop="aggregateRating"
        >
          <span aria-label="Valoración">⭐</span> {{ bannerData.starRating }}
        </li>
      </ul>

      <!-- Descripción -->
      <p class="program-description" itemprop="description">
        {{ bannerData.desc?.details }}
      </p>

      <!-- Acciones -->
      <div class="banner-actions">
        <button
          type="button"
          class="btn-primary"
          (click)="navigateTo()"
          [attr.aria-label]="
            'Ver más detalles de ' + (bannerData.title?.value || 'programa')
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="btn-icon"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
              clip-rule="evenodd"
            />
          </svg>
          <span>Más Detalles</span>
        </button>

        <button
          type="button"
          class="btn-secondary"
          (click)="addReminder()"
          aria-label="Recordar este programa"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="btn-icon"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"
            />
          </svg>
          <span>Recordar</span>
        </button>
      </div>
    </div>
  </div>
</article>

<!-- Estado vacío optimizado -->
<div
  *ngIf="!bannerData"
  class="banner-empty"
  role="status"
  aria-label="No hay datos disponibles"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="empty-icon"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
    aria-hidden="true"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
    />
  </svg>
  <p class="empty-text">No hay datos disponibles para mostrar</p>
</div>
