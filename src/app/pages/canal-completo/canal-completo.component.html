<main
  class="flex-1 py-4 sm:py-6 lg:py-8 px-4 sm:px-6 lg:px-10 max-w-[100vw] overflow-hidden"
  role="main"
>
  <!-- Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-red-600 focus:text-white focus:rounded-lg"
  >
    Saltar al contenido principal
  </a>

  <!-- Navigation Bar -->
  <app-nav-bar></app-nav-bar>

  <!-- Hero Section - Live Program -->
  <section
    aria-labelledby="hero-heading"
    class="mt-4 sm:mt-6 relative overflow-hidden rounded-xl sm:rounded-2xl"
  >
    <div
      class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/80 to-transparent z-10"
    ></div>
    <app-banner *ngIf="program" [data]="program" class="block"></app-banner>

    <div
      class="relative z-20 p-4 sm:p-6 lg:p-8 flex flex-col justify-end min-h-[200px] sm:min-h-[300px]"
    >
      <div class="flex items-center gap-2 sm:gap-3 mb-3">
        <img
          [src]="
            'https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/' +
            program?.channel +
            '.png&w=56&h=56&fit=cover&output=webp'
          "
          [alt]="'Logo de ' + canal"
          class="w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover shadow-lg ring-2 ring-white/20"
          width="56"
          height="56"
          loading="eager"
          fetchpriority="high"
        />
        <div>
          <div class="flex items-center gap-2 mb-1">
            <span class="live-dot" aria-hidden="true"></span>
            <span
              class="text-xs sm:text-sm font-semibold text-white uppercase tracking-wide"
            >
              En Directo
            </span>
          </div>
          <h1
            id="hero-heading"
            class="text-xl sm:text-2xl lg:text-3xl font-bold text-white leading-tight"
          >
            {{ canal }}
          </h1>
        </div>
      </div>

      <div *ngIf="program" class="max-w-2xl">
        <h2
          class="text-base sm:text-lg lg:text-xl font-semibold text-white mb-2"
        >
          {{ program.title?.value }}
        </h2>
        <div
          class="flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm text-white"
        >
          <span *ngIf="program.category?.value">{{
            program.category.value.split(",")[0]
          }}</span>
          <span
            *ngIf="program.start && program.stop"
            class="flex items-center gap-1"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                clip-rule="evenodd"
              ></path>
            </svg>
            {{ formatTime(program.start) }} - {{ formatTime(program.stop) }}
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Stats Section -->
  <section
    aria-labelledby="stats-heading"
    class="mt-6 grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"
  >
    <h2 id="stats-heading" class="sr-only">Estadísticas del canal</h2>

    <div class="stat-card stat-card--red">
      <div class="stat-card__icon" aria-hidden="true">
        <svg
          class="w-6 h-6 sm:w-7 sm:h-7"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"
          ></path>
        </svg>
      </div>
      <p class="stat-card__value">{{ programs.length }}</p>
      <p class="stat-card__label">Programas hoy</p>
    </div>

    <div class="stat-card stat-card--blue">
      <div class="stat-card__icon" aria-hidden="true">
        <svg
          class="w-6 h-6 sm:w-7 sm:h-7"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
            clip-rule="evenodd"
          ></path>
        </svg>
      </div>
      <p class="stat-card__value">{{ getProgramasPorHora() }}</p>
      <p class="stat-card__label">Esta hora</p>
    </div>

    <div class="stat-card stat-card--purple">
      <div class="stat-card__icon" aria-hidden="true">
        <svg
          class="w-6 h-6 sm:w-7 sm:h-7"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"
          ></path>
        </svg>
      </div>
      <p class="stat-card__value">{{ categorias.length }}</p>
      <p class="stat-card__label">Categorías</p>
    </div>

    <div class="stat-card stat-card--green">
      <div class="stat-card__icon" aria-hidden="true">
        <svg
          class="w-6 h-6 sm:w-7 sm:h-7"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            fill-rule="evenodd"
            d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
            clip-rule="evenodd"
          ></path>
        </svg>
      </div>
      <p class="stat-card__value">{{ getProgramasDestacados() }}</p>
      <p class="stat-card__label">Destacados</p>
    </div>
  </section>

  <!-- Day Navigation -->
  <section
    aria-labelledby="day-navigation-heading"
    class="mt-6 sm:mt-8 sticky top-0 z-30 bg-transparent backdrop-blur-lg py-3 sm:py-4 -mx-4 sm:-mx-6 lg:-mx-10 px-4 sm:px-6 lg:px-10 border-b border-transparent dark:border-transparent"
  >
    <h2 id="day-navigation-heading" class="sr-only">Selección de día</h2>
    <nav
      class="flex justify-center items-center"
      role="navigation"
      aria-label="Selección de programación por día"
    >
      <div class="inline-flex rounded-lg p-1 bg-transparent">
        <button
          *ngFor="let day of days"
          type="button"
          class="px-4 sm:px-6 py-2 sm:py-2.5 rounded-full text-sm sm:text-base font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"
          [ngClass]="
            diaSeleccionado === day.label
              ? 'bg-red-600 text-white shadow-lg'
              : 'text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700'
          "
          (click)="cambiarDia(day.value)"
          [attr.aria-pressed]="diaSeleccionado === day.label"
          [attr.aria-label]="
            'Ver programación de ' +
            day.label.toLowerCase() +
            (diaSeleccionado === day.label ? ' (seleccionado)' : '')
          "
        >
          {{ day.label }}
        </button>
      </div>
    </nav>
  </section>

  <!-- Main Content -->
  <div id="main-content">
    <!-- Time-based Quick Access -->
    <section aria-labelledby="time-slots-heading" class="mt-6 sm:mt-8">
      <header class="mb-4 sm:mb-6">
        <h2
          id="time-slots-heading"
          class="text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-2"
        >
          Programación por franjas horarias
        </h2>
        <p class="text-sm sm:text-base text-white">
          Encuentra rápidamente qué ver en {{ canal }} según la hora del día
        </p>
      </header>

      <div
        class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4"
      >
        <button
          *ngFor="let slot of timeSlots"
          type="button"
          class="flex flex-col items-center justify-center p-4 sm:p-5 rounded-xl border-2 transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500"
          (click)="scrollToTimeSlot(slot.hour)"
          [attr.aria-label]="'Ver programación de ' + slot.label"
        >
          <svg
            class="w-6 h-6 sm:w-8 sm:h-8 mb-2"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <span class="text-xs sm:text-sm font-semibold">{{ slot.label }}</span>
          <span class="text-xs text-white mt-1">{{ slot.count }} prog.</span>
        </button>
      </div>
    </section>

    <!-- Programs by Time Slot -->
    <section
      *ngFor="let slot of timeSlots; let i = index"
      [id]="'time-slot-' + slot.hour"
      class="mt-8 sm:mt-10 scroll-mt-24"
      [attr.aria-labelledby]="'time-slot-heading-' + i"
    >
      <header
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4 sm:mb-6"
      >
        <div class="flex items-center gap-3">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg"
          >
            <span class="text-lg sm:text-xl font-bold text-white"
              >{{ slot.hour }}:00</span
            >
          </div>
          <div>
            <h3
              [id]="'time-slot-heading-' + i"
              class="text-lg sm:text-xl lg:text-2xl font-bold text-white"
            >
              {{ slot.label }}
            </h3>
            <p class="text-xs sm:text-sm text-white">
              {{ slot.programs.length }} programas en {{ canal }}
            </p>
          </div>
        </div>

        <nav
          class="hidden sm:flex items-center gap-2"
          [attr.aria-label]="'Navegación ' + slot.label"
        >
          <button
            type="button"
            [attr.aria-label]="'Ver programas anteriores de ' + slot.label"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="timeSlotSliders[i]?.prev()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M13.293 6.293L7.58 12l5.7 5.7 1.41-1.42 -4.3-4.3 4.29-4.293Z"
              ></path>
            </svg>
          </button>
          <button
            type="button"
            [attr.aria-label]="'Ver más programas de ' + slot.label"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="timeSlotSliders[i]?.next()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M10.7 17.707l5.7-5.71 -5.71-5.707L9.27 7.7l4.29 4.293 -4.3 4.29Z"
              ></path>
            </svg>
          </button>
        </nav>
      </header>

      <div class="relative">
        <app-slider
          #timeSlotSlider
          [programas]="slot.programs"
          variant="canales"
          [logo]="
            'https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/' +
            program?.channel +
            '.png'
          "
          *ngIf="slot.programs.length > 0"
        ></app-slider>
        <p
          *ngIf="slot.programs.length === 0"
          class="text-center py-8 text-white"
        >
          No hay programas en esta franja horaria
        </p>
      </div>
    </section>

    <!-- Categories Section -->
    <section
      aria-labelledby="categories-heading"
      class="mt-10 sm:mt-12 pt-8 sm:pt-10 border-t border-gray-200 dark:border-gray-700"
    >
      <header class="mb-6 sm:mb-8">
        <h2
          id="categories-heading"
          class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-3"
        >
          Explora por categorías
        </h2>
        <p class="text-sm sm:text-base text-white max-w-3xl">
          Descubre toda la variedad de contenido que ofrece {{ canal }}. Desde
          películas y series hasta documentales, deportes y programas
          infantiles.
        </p>
      </header>

      <div class="space-y-8 sm:space-y-10">
        <article
          *ngFor="let categoria of categorias; let i = index"
          class="scroll-mt-24"
          [attr.aria-labelledby]="'category-heading-' + i"
        >
          <header
            class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4"
          >
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 sm:w-12 sm:h-12 rounded-lg bg-gradient-to-br from-gray-700 to-gray-900 dark:from-gray-600 dark:to-gray-800 flex items-center justify-center shadow-md"
              >
                <svg
                  class="w-5 h-5 sm:w-6 sm:h-6 text-white"
                  [innerHTML]="getCategoryIcon(categoria)"
                ></svg>
              </div>
              <div>
                <h3
                  [id]="'category-heading-' + i"
                  class="text-lg sm:text-xl lg:text-2xl font-bold text-white"
                >
                  {{ categoria }}
                </h3>
                <p class="text-xs sm:text-sm text-white">
                  {{ getProgramsByCategory(categoria).length }} programas
                  disponibles
                </p>
              </div>
            </div>
            <nav
              class="hidden sm:flex items-center gap-2"
              [attr.aria-label]="'Navegación categoría ' + categoria"
            >
              <button
                type="button"
                [attr.aria-label]="'Ver programas anteriores de ' + categoria"
                class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
                (click)="categorySliders[i]?.prev()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  class="w-full h-full fill-current"
                >
                  <path
                    d="M13.293 6.293L7.58 12l5.7 5.7 1.41-1.42 -4.3-4.3 4.29-4.293Z"
                  ></path>
                </svg>
              </button>
              <button
                type="button"
                [attr.aria-label]="'Ver más programas de ' + categoria"
                class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
                (click)="categorySliders[i]?.next()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  class="w-full h-full fill-current"
                >
                  <path
                    d="M10.7 17.707l5.7-5.71 -5.71-5.707L9.27 7.7l4.29 4.293 -4.3 4.29Z"
                  ></path>
                </svg>
              </button>
            </nav>
          </header>

          <div class="relative">
            <app-slider
              [programas]="getProgramsByCategory(categoria)"
              variant="canales"
              [logo]="
                'https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/' +
                program?.channel +
                '.png'
              "
              *ngIf="getProgramsByCategory(categoria).length > 0"
            ></app-slider>
          </div>
        </article>
      </div>
    </section>

    <!-- Complete Schedule -->
    <section
      aria-labelledby="full-schedule-heading"
      class="mt-10 sm:mt-12 pt-8 sm:pt-10 border-t border-gray-200 dark:border-gray-700"
    >
      <header
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-6"
      >
        <div>
          <h2
            id="full-schedule-heading"
            class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2"
          >
            Parrilla completa {{ diaSeleccionado.toLowerCase() }}
          </h2>
          <p class="text-sm sm:text-base text-gray-200">
            Todos los programas de {{ canal }} ordenados cronológicamente
          </p>
        </div>

        <nav
          class="hidden sm:flex items-center gap-2"
          aria-label="Navegación parrilla completa"
        >
          <button
            type="button"
            aria-label="Ver programas anteriores"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="fullScheduleSlider?.prev()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M13.293 6.293L7.58 12l5.7 5.7 1.41-1.42 -4.3-4.3 4.29-4.293Z"
              ></path>
            </svg>
          </button>
          <button
            type="button"
            aria-label="Ver más programas"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="fullScheduleSlider?.next()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M10.7 17.707l5.7-5.71 -5.71-5.707L9.27 7.7l4.29 4.293 -4.3 4.29Z"
              ></path>
            </svg>
          </button>
        </nav>
      </header>

      <div class="relative">
        <app-slider
          #fullScheduleSlider
          [programas]="programs"
          variant="canales"
          [logo]="
            'https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/' +
            program?.channel +
            '.png'
          "
          *ngIf="programs.length > 0"
        ></app-slider>
      </div>
    </section>

    <!-- Other Channels Live -->
    <section
      aria-labelledby="other-channels-heading"
      class="mt-10 sm:mt-12 pt-8 sm:pt-10 border-t border-gray-200 dark:border-gray-700"
    >
      <header
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-6"
      >
        <div class="flex items-center gap-3">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg"
          >
            <svg
              class="w-6 h-6 sm:w-7 sm:h-7 text-white"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M10 15.5v-7c0-.41.47-.65.8-.4l4.67 3.5c.27.2.27.6 0 .8l-4.67 3.5c-.33.25-.8.01-.8-.4Zm11.96-4.45c.58 6.26-4.64 11.48-10.9 10.9 -4.43-.41-8.12-3.85-8.9-8.23 -.26-1.42-.19-2.78.12-4.04 .14-.58.76-.9 1.31-.7v0c.47.17.75.67.63 1.16 -.2.82-.27 1.7-.19 2.61 .37 4.04 3.89 7.25 7.95 7.26 4.79.01 8.61-4.21 7.94-9.12 -.51-3.7-3.66-6.62-7.39-6.86 -.83-.06-1.63.02-2.38.2 -.49.11-.99-.16-1.16-.64v0c-.2-.56.12-1.17.69-1.31 1.79-.43 3.75-.41 5.78.37 3.56 1.35 6.15 4.62 6.5 8.4ZM5.5 4C4.67 4 4 4.67 4 5.5 4 6.33 4.67 7 5.5 7 6.33 7 7 6.33 7 5.5 7 4.67 6.33 4 5.5 4Z"
              ></path>
            </svg>
          </div>
          <div>
            <h2
              id="other-channels-heading"
              class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white"
            >
              Ahora en otros canales
            </h2>
            <p class="text-sm sm:text-base text-gray-200 mt-1">
              Descubre qué está emitiendo el resto de la televisión en este
              momento
            </p>
          </div>
        </div>

        <nav
          class="hidden sm:flex items-center gap-2"
          aria-label="Navegación otros canales"
        >
          <button
            type="button"
            aria-label="Ver canales anteriores"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="otherChannelsSlider?.prev()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M13.293 6.293L7.58 12l5.7 5.7 1.41-1.42 -4.3-4.3 4.29-4.293Z"
              ></path>
            </svg>
          </button>
          <button
            type="button"
            aria-label="Ver más canales"
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600 p-2 hover:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
            (click)="otherChannelsSlider?.next()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-full h-full fill-current"
            >
              <path
                d="M10.7 17.707l5.7-5.71 -5.71-5.707L9.27 7.7l4.29 4.293 -4.3 4.29Z"
              ></path>
            </svg>
          </button>
        </nav>
      </header>

      <div class="relative">
        <app-slider
          #otherChannelsSlider
          [programas]="live_programs"
          variant="canales"
          *ngIf="live_programs.length > 0"
        ></app-slider>
        <p
          *ngIf="live_programs.length === 0"
          class="text-center py-12 text-gray-200"
        >
          No hay información de otros canales disponible
        </p>
      </div>
    </section>

    <!-- SEO Content Section -->
    <section
      aria-labelledby="seo-content-heading"
      class="mt-10 sm:mt-12 pt-8 sm:pt-10 border-t border-gray-200 dark:border-gray-700"
    >
      <article
        class="prose prose-sm sm:prose-base lg:prose-lg dark:prose-invert max-w-none"
      >
        <h2
          id="seo-content-heading"
          class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-4"
        >
          Toda la programación de {{ canal }}
          {{ diaSeleccionado.toLowerCase() }}
        </h2>

        <div class="space-y-4 text-white leading-relaxed">
          <p>
            Descubre la
            <strong
              >programación completa de {{ canal }}
              {{ diaSeleccionado.toLowerCase() }}</strong
            >
            con nuestra guía actualizada en tiempo real. Consulta todos los
            programas, series, películas y documentales que se emiten en uno de
            los canales más populares de la televisión española.
          </p>

          <p>
            En esta página encontrarás información detallada sobre qué ver en
            {{ canal }}, incluyendo horarios exactos, sinopsis de cada programa
            y recomendaciones personalizadas. Nuestra guía TV te permite
            planificar tu día y no perderte ninguno de tus programas favoritos.
          </p>

          <h3 class="text-xl sm:text-2xl font-bold text-white mt-8 mb-4">
            ¿Qué puedes ver en {{ canal }} {{ diaSeleccionado.toLowerCase() }}?
          </h3>

          <p>{{ canal }} ofrece una programación variada que incluye:</p>

          <ul class="list-disc list-inside space-y-2 ml-4">
            <li *ngFor="let categoria of categorias.slice(0, 6)">
              <strong>{{ categoria }}</strong
              >: Programas especializados en {{ categoria.toLowerCase() }}
              para todos los públicos
            </li>
          </ul>

          <h3
            class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4"
          >
            Programación destacada de {{ canal }}
          </h3>

          <p>
            Entre los programas más populares que puedes disfrutar en
            {{ canal }} se encuentran producciones de alta calidad que abarcan
            entretenimiento, información, cultura y mucho más. Nuestro sistema
            actualiza la información cada hora para ofrecerte siempre los datos
            más precisos.
          </p>

          <p>
            Con <strong>{{ programs.length }} programas</strong> programados
            para {{ diaSeleccionado.toLowerCase() }}, {{ canal }} te ofrece
            opciones para cada momento del día, desde el desayuno hasta la
            madrugada. Utiliza nuestra navegación por franjas horarias para
            encontrar rápidamente lo que buscas.
          </p>

          <h3
            class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4"
          >
            Cómo usar nuestra guía de programación
          </h3>

          <p>
            Navega fácilmente por la programación de {{ canal }} usando nuestras
            diferentes secciones:
          </p>

          <ul class="list-disc list-inside space-y-2 ml-4">
            <li>
              <strong>Franjas horarias</strong>: Encuentra programas por mañana,
              tarde, noche o madrugada
            </li>
            <li>
              <strong>Categorías</strong>: Explora contenido específico como
              películas, series o deportes
            </li>
            <li>
              <strong>Parrilla completa</strong>: Consulta todos los programas
              ordenados cronológicamente
            </li>
            <li>
              <strong>En directo</strong>: Descubre qué se está emitiendo ahora
              en {{ canal }}
            </li>
          </ul>

          <h3
            class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4"
          >
            Información actualizada en tiempo real
          </h3>

          <p>
            Nuestra guía de programación de {{ canal }} se actualiza
            constantemente para garantizar que siempre tengas acceso a la
            información más reciente. Consulta también qué se emite mañana o
            pasado mañana para planificar tu semana de televisión.
          </p>

          <p class="text-sm text-white mt-6">
            Última actualización: {{ getCurrentDate() }}
          </p>
        </div>
      </article>
    </section>

    <!-- Related Channels -->
    <section
      aria-labelledby="related-channels-heading"
      class="mt-10 sm:mt-12 pt-8 sm:pt-10 border-t border-gray-200 dark:border-gray-700 pb-8"
    >
      <header class="mb-6">
        <h2
          id="related-channels-heading"
          class="text-2xl sm:text-3xl font-bold text-white mb-2"
        >
          Otros canales que te pueden interesar
        </h2>
        <p class="text-sm sm:text-base text-white">
          Explora la programación de canales similares
        </p>
      </header>

      <div
        class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 sm:gap-4"
      >
        <a
          *ngFor="let channel of getRelatedChannels()"
          [routerLink]="['/canal', channel.id]"
          class="group flex flex-col items-center p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:border-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500"
          [attr.aria-label]="'Ver programación de ' + channel.name"
        >
          <img
            [src]="
              'https://wsrv.nl/?url=https://raw.githubusercontent.com/davidmuma/picons_dobleM/master/icon/' +
              channel.id +
              '.png&w=64&h=64&fit=cover&output=webp'
            "
            [alt]="'Logo de ' + channel.name"
            class="w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover shadow-md group-hover:scale-110 transition-transform duration-300"
            width="64"
            height="64"
            loading="lazy"
          />
          <span
            class="mt-3 text-xs sm:text-sm font-semibold text-white text-center"
          >
            {{ channel.name }}
          </span>
        </a>
      </div>
    </section>
  </div>

  <!-- Structured Data -->
  <script type="application/ld+json" *ngIf="program && channel">
    {
      "@context": "https://schema.org",
      "@type": "BroadcastService",
      "name": "{{ canal }}",
      "broadcastDisplayName": "{{ canal }}",
      "description": "Programación completa de {{ canal }} con todos los horarios y programas del día",
      "potentialAction": {
        "@type": "WatchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "{{ getCanonicalUrl() }}"
        }
      },
      "broadcast": {
        "@type": "BroadcastEvent",
        "name": "{{ program?.title?.value || 'Programación en directo' }}",
        "description": "{{ program?.desc?.value || 'Programación actual de ' + canal }}",
        "startDate": "{{ program?.start }}",
        "endDate": "{{ program?.stop }}",
        "isLiveBroadcast": true,
        "broadcastOfEvent": {
          "@type": "Event",
          "name": "{{ program?.title?.value }}"
        }
      }
    }
  </script>
</main>
